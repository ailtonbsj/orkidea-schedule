var Orkidea=function(){function a(a,d,j){var k=this;this.indexColor=0,k.listDates=[],k.listYLabels=[],k.listXLabels=[],h=j;var l=[];d.map(function(a){var b=Math.ceil,c=a.inittime.split(' ')[0],d=a.finaltime.split(' ')[0];if(c!=d)for(var e,f=c.split('/'),g=d.split('/'),h=new Date(f[2],f[1]-1,f[0]),j=new Date(g[2],g[1]-1,g[0]),k=diffDays=b((j-h)/86400000),m=0;m<=k;m++){e=new Date(h.getTime()),e.setDate(e.getDate()+m);var n=e.toLocaleDateString('pt-BR');0==m?(iniFrag=n+' '+a.inittime.split(' ')[1],endFrag=n+' 23:59:59'):m==k?(iniFrag=n+' 00:00:00',endFrag=n+' '+a.finaltime.split(' ')[1]):(iniFrag=n+' 00:00:00',endFrag=n+' 23:59:59'),obj={finaltime:endFrag,inittime:iniFrag,text:a.text,yAxis:a.yAxis},l.push(obj)}else l.push(a)}),l.map(function(a){var b=a.inittime.split(' ')[0],c=a.finaltime.split(' ')[0];b!=c&&console.warn('This component does not support interval major than one day!'),null==k.listDates[b]?(k.listDates[b]=[],k.listDates[b].push(a)):k.listDates[b].push(a)});var m=document.getElementById(a);for(date in m.innerHTML='',k.listDates){var n=document.createElement('div');m.appendChild(n),n.classList.add('orkidea-schedule-wrap');var o=document.createElement('div');for(label in n.appendChild(o),o.classList.add('orkidea-schedule-panel'),o.innerHTML='',k.listYLabels=[],k.listXLabels=[],e=0,f=0,k.createYLabel(o,date),k.listDates[date].map(function(a){null==k.listYLabels[a.yAxis]&&k.createYLabel(o,a.yAxis)}),k.listYLabels)k.listYLabels[label].style.width=f+'px';widthPanel=o.clientWidth-f,hourDist=widthPanel/24;var p=document.createElement('div');for(p.innerHTML='00h',p.style.background='green',o.appendChild(p),b=p.clientWidth,c=p.clientHeight,o.removeChild(p),g=1;b>g*hourDist;)g++;for(var q=0;24>q;q+=g)k.createXLabel(o,q+'h',f+q*hourDist);k.listDates[date].map(function(a){var b=a.inittime.split(' ')[1],c=b.split(':'),d=60*(60*+c[0])+60*+c[1]+ +c[2];b=a.finaltime.split(' ')[1],c=b.split(':');var e=60*(60*+c[0])+60*+c[1]+ +c[2],g=k.listYLabels[a.yAxis].offsetTop,h=f+widthPanel*(d/86399),i=f+widthPanel*(e/86399);//linear interpolation
i-=h,k.createItem(a.text+'\nStart: '+a.inittime+'\nEnd: '+a.finaltime,h,g,i,a.color,o)})}}var b,c,d=['#001f3f','#0074D9','#7FDBFF','#39CCCC','#3D9970','#2ECC40','#01FF70','#FFDC00','#FF851B','#FF4136','#85144b','#F012BE','#B10DC9'],e=0,f=0,g=1,h={};return $Schedule=a.prototype,$Schedule.indexColor=0,$Schedule.listDates=[],$Schedule.listYLabels=[],$Schedule.listXLabels=[],$Schedule.createItem=function(a,b,e,f,g,i){var j=document.createElement('div');j.style.left=b+'px',j.style.top=e+1+'px',j.style.width=f+'px',j.style.height=c+'px',null==h.uniqueColor?(j.style.background=d[this.indexColor],this.indexColor=12>this.indexColor?this.indexColor+1:0):'indata'==h.uniqueColor?null==g?(j.style.background=d[this.indexColor],this.indexColor=12>this.indexColor?this.indexColor+1:0):j.style.background=g:j.style.background=h.uniqueColor,j.style.overflow='hidden',j.setAttribute('title',a),j.innerHTML=a.split('\n')[0],console.log(),j.classList.add('orkidea-schedule-item'),i.appendChild(j),j.onclick=function(){alert(this.getAttribute('title'))}},$Schedule.createXLabel=function(a,b,c){var d=document.createElement('div');d.innerHTML=2===b.length?'0'+b:b,d.style.left=c+'px',d.style.width=hourDist+'px',a.appendChild(d),d.style.top='0',this.listXLabels.push(d)},$Schedule.createYLabel=function(a,b){var c=document.createElement('div');c.innerHTML=b,a.appendChild(c),c.style.top=e*(c.clientHeight+2)+'px',e++,f<c.clientWidth+1&&(f=c.clientWidth+1),this.listYLabels[b]=c,c.classList.add('orkidea-schedule-labelY');var d=document.createElement('DIV');d.innerHTML='&nbsp',d.style.position='static',a.appendChild(d),d.classList.add('orkidea-schedule-gridY')},{Schedule:a}}();